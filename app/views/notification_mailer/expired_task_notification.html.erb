<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background-color: #dc3545;
        color: white;
        padding: 20px;
        border-radius: 5px 5px 0 0;
      }
      .content {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 0 0 5px 5px;
      }
      .task-details {
        background-color: white;
        padding: 15px;
        border-left: 4px solid #dc3545;
        margin: 15px 0;
      }
      .footer {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #dee2e6;
        font-size: 12px;
        color: #6c757d;
      }
      .label {
        font-weight: bold;
        color: #495057;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h2>⚠️ Overdue Task</h2>
    </div>

    <div class="content">
      <p>Hello <%= @user.name %>,</p>

      <p>We inform you that the following task is <strong>overdue</strong> and requires your attention:</p>

      <div class="task-details">
        <p><span class="label">Order:</span> <%= @order.order_number %></p>
        <p><span class="label">Task description:</span> <%= @task.description %></p>
        <p><span class="label">Expected completion date:</span> <%= @task.expected_end_date.strftime('%m/%d/%Y') %></p>
        <p><span class="label">Status:</span> <%= @task.status.humanize %></p>
        <p><span class="label">Days overdue:</span> <%= (Date.current - @task.expected_end_date).to_i %> days</p>
      </div>

      <p>Please take the necessary actions to update the status of this task.</p>
    </div>

    <div class="footer">
      <p>This is an automated email generated by the Kiuey production management system.</p>
      <p>Please do not reply to this email.</p>
    </div>
  </body>
</html>
